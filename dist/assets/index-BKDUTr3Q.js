(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function c(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=c(e);fetch(e.href,t)}})();const a=7e3;async function u(n,r={},c="Erreur"){const o=new AbortController,e=setTimeout(()=>o.abort(),a);try{const t=await fetch(n,{...r,signal:o.signal});if(!t.ok)throw new Error(`HTTP ${t.status}`);return await t.json()}catch(t){return console.error("Erreur API :",t),c}finally{clearTimeout(e)}}async function d(){try{const n=await u("https://api.meteo.example/current");document.getElementById("weather").textContent=`ðŸŒ¤ï¸ ${n.current.temperature_2m} Â°C`}catch{document.getElementById("weather").textContent="âš ï¸ MÃ©tÃ©o indisponible"}}async function l(){try{document.getElementById("rer").textContent="ðŸš† RER A : Prochains dÃ©partsâ€¦"}catch{document.getElementById("rer").textContent="âš ï¸ RER A indisponible"}}async function m(){try{document.getElementById("bus").textContent="ðŸšŒ Bus : Prochains dÃ©partsâ€¦"}catch{document.getElementById("bus").textContent="âš ï¸ Bus indisponibles"}}async function f(){try{document.getElementById("velib").textContent="ðŸš² VÃ©lib' : Stations disponiblesâ€¦"}catch{document.getElementById("velib").textContent="âš ï¸ VÃ©lib' indisponibles"}}async function y(){try{document.getElementById("news").textContent="ðŸ—žï¸ Actus : Chargementâ€¦"}catch{document.getElementById("news").textContent="âš ï¸ Actus indisponibles"}}async function h(){try{const r=await(await fetch("races.json")).json();document.getElementById("races").textContent=`ðŸ‡ Prochaines courses : ${r.length}`}catch{document.getElementById("races").textContent="âš ï¸ Courses indisponibles"}}function i(){const n=new Date;document.getElementById("datetime").textContent=`ðŸ• ${n.toLocaleTimeString()} â€“ ðŸ“… ${n.toLocaleDateString("fr-FR")}`}document.addEventListener("DOMContentLoaded",()=>{i(),d(),l(),m(),f(),y(),h(),setInterval(i,1e4)});
